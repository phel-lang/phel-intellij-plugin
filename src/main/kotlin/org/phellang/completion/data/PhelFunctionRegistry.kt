package org.phellang.completion.data

import org.phellang.completion.infrastructure.PhelCompletionPriority

/**
 * Based on official Phel API documentation: https://phel-lang.org/documentation/api/
 */
object PhelFunctionRegistry {

    private val functions = mutableMapOf<Namespace, List<DataFunction>>()

    init {
        registerCoreFunctions()
        registerStringFunctions()
        registerJsonFunctions()
        registerHttpFunctions()
        registerHtmlFunctions()
        registerTestFunctions()
        registerReplFunctions()
        registerBase64Functions()
        registerPhpInteropFunctions()
    }

    fun getFunctions(namespace: Namespace): List<DataFunction> {
        return functions[namespace] ?: emptyList()
    }

    fun getFunctions(priority: PhelCompletionPriority): List<DataFunction> {
        return functions.values.flatten().filter { it.priority == priority }
    }

    fun getFunction(name: String): DataFunction? {
        return functions.values.flatten().find { it.name == name }
    }

    fun getAllFunctions(): List<DataFunction> {
        return functions.values.flatten()
    }

    private fun registerBase64Functions() {
        functions[Namespace.BASE64] = listOf(
            DataFunction("base64/decode", "(decode s & [strict?])", "Decodes the Base64 encoded string `s`. If `strict?` is true invalid characters trigger an error.", PhelCompletionPriority.BASE64_FUNCTIONS, "base64"),
            DataFunction("base64/decode-url", "(decode-url s & [strict?])", "Decodes a Base64 URL encoded string `s`. If `strict?` is true invalid characters trigger an error.", PhelCompletionPriority.BASE64_FUNCTIONS, "base64"),
            DataFunction("base64/encode", "(encode s)", "Returns the Base64 representation of `s`.", PhelCompletionPriority.BASE64_FUNCTIONS, "base64"),
            DataFunction("base64/encode-url", "(encode-url s)", "Returns the URL safe Base64 representation of `s`. Padding is removed.", PhelCompletionPriority.BASE64_FUNCTIONS, "base64"),
        )
    }

    private fun registerCoreFunctions() {
        functions[Namespace.CORE] = listOf(
            DataFunction("%", "(% dividend divisor)", "Return the remainder of `dividend` / `divisor`.", PhelCompletionPriority.ARITHMETIC_FUNCTIONS, "core"),
            DataFunction("*", "(* & xs)", "Returns the product of all elements in `xs`. All elements in `xs` must benumbers. If `xs` is empty, return 1.", PhelCompletionPriority.ARITHMETIC_FUNCTIONS, "core"),
            DataFunction("**", "(** a x)", "Return `a` to the power of `x`.", PhelCompletionPriority.ARITHMETIC_FUNCTIONS, "core"),
            DataFunction("*build-mode*", "", "Set to true when a file is being built/transpiled, false otherwise.", PhelCompletionPriority.MACROS, "core"),
            DataFunction("*compile-mode*", "", "Deprecated! Use *build-mode* instead. Set to true when a file is compiled, false otherwise.", PhelCompletionPriority.MACROS, "core"),
            DataFunction("*file*", "*file*", "Returns the path of the current source file.", PhelCompletionPriority.MACROS, "core"),
            DataFunction("*ns*", "*ns*", "Returns the namespace in the current scope.", PhelCompletionPriority.MACROS, "core"),
            DataFunction("+", "(+ & xs)", "Returns the sum of all elements in `xs`. All elements `xs` must be numbers.  If `xs` is empty, return 0.", PhelCompletionPriority.ARITHMETIC_FUNCTIONS, "core"),
            DataFunction("-", "(- & xs)", "Returns the difference of all elements in `xs`. If `xs` is empty, return 0. If `xs`  has one element, return the negative value of that element.", PhelCompletionPriority.ARITHMETIC_FUNCTIONS, "core"),
            DataFunction("->", "(-> x & forms)", "Threads the expr through the forms. Inserts `x` as the second item  in the first form, making a list of it if it is not a list already.  If there are more forms, insert the first form as the second item in  the second form, etc.", PhelCompletionPriority.MACROS, "core"),
            DataFunction("->>", "(->> x & forms)", "Threads the expr through the forms. Inserts `x` as the  last item in the first form, making a list of it if it is not a  list already. If there are more forms, insert the first form as the  last item in the second form, etc.", PhelCompletionPriority.MACROS, "core"),
            DataFunction("/", "(/ & xs)", "Returns the nominator divided by all the denominators. If `xs` is empty,returns 1. If `xs` has one value, returns the reciprocal of x.", PhelCompletionPriority.ARITHMETIC_FUNCTIONS, "core"),
            DataFunction("<", "(< a & more)", "Checks if each argument is strictly less than the following argument. Returns a boolean.", PhelCompletionPriority.ARITHMETIC_FUNCTIONS, "core"),
            DataFunction("<=", "(<= a & more)", "Checks if each argument is less than or equal to the following argument. Returns a boolean.", PhelCompletionPriority.ARITHMETIC_FUNCTIONS, "core"),
            DataFunction("<=>", "(<=> a b)", "Alias for the spaceship PHP operator in ascending order. Returns an int.", PhelCompletionPriority.ARITHMETIC_FUNCTIONS, "core"),
            DataFunction("=", "(= a & more)", "Checks if all values are equal. Same as `a == b` in PHP.", PhelCompletionPriority.ARITHMETIC_FUNCTIONS, "core"),
            DataFunction(">", "(> a & more)", "Checks if each argument is strictly greater than the following argument. Returns a boolean.", PhelCompletionPriority.ARITHMETIC_FUNCTIONS, "core"),
            DataFunction(">=", "(>= a & more)", "Checks if each argument is greater than or equal to the following argument. Returns a boolean.", PhelCompletionPriority.ARITHMETIC_FUNCTIONS, "core"),
            DataFunction(">=<", "(>=< a b)", "Alias for the spaceship PHP operator in descending order. Returns an int.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("NAN", "", "Constant for Not a Number (NAN) values.", PhelCompletionPriority.ARITHMETIC_FUNCTIONS, "core"),
            DataFunction("all?", "(all? pred xs)", "Returns true if `(pred x)` is logical true for every `x` in collection `xs`   or if `xs` is empty. Otherwise returns false.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("and", "(and & args)", "Evaluates each expression one at a time, from left to right. If a formreturns logical false, `and` returns that value and doesn't evaluate any of theother expressions, otherwise, it returns the value of the last expression.Calling the `and` function without arguments returns true.", PhelCompletionPriority.MACROS, "core"),
            DataFunction("apply", "(apply f expr*)", "Calls the function with the given arguments. The last argument must be a list of values, which are passed as separate arguments, rather than a single list. Apply returns the result of the calling function.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("argv", "", "Array of arguments passed to script.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("as->", "(as-> expr name & forms)", "Binds `name` to `expr`, evaluates the first form in the lexical context  of that binding, then binds name to that result, repeating for each  successive form, returning the result of the last form.", PhelCompletionPriority.MACROS, "core"),
            DataFunction("assert-non-nil", "(assert-non-nil & xs)", "", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("assoc", "(assoc ds key value)", "Alias for `put`.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("assoc-in", "(assoc-in ds ks v)", "Alias for `put-in`.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("associative?", "(associative? x)", "Returns true if `x` is an associative data structure, false otherwise.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("binding", "(binding bindings & body)", "Temporary redefines definitions while executing the body.  The value will be reset after the body was executed.", PhelCompletionPriority.MACROS, "core"),
            DataFunction("bit-and", "(bit-and x y & args)", "Bitwise and.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("bit-clear", "(bit-clear x n)", "Clear bit an index `n`.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("bit-flip", "(bit-flip x n)", "Flip bit at index `n`.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("bit-not", "(bit-not x)", "Bitwise complement.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("bit-or", "(bit-or x y & args)", "Bitwise or.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("bit-set", "(bit-set x n)", "Set bit an index `n`.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("bit-shift-left", "(bit-shift-left x n)", "Bitwise shift left.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("bit-shift-right", "(bit-shift-right x n)", "Bitwise shift right.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("bit-test", "(bit-test x n)", "Test bit at index `n`.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("bit-xor", "(bit-xor x y & args)", "Bitwise xor.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("boolean?", "(boolean? x)", "Returns true if `x` is a boolean, false otherwise.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("butlast", "(butlast xs)", "Returns all but the last item in `xs`.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("case", "(case e & pairs)", "Takes an expression `e` and a set of test-content/expression pairs. First  evaluates `e` and then finds the first pair where the test-constant matches  the result of `e`. The associated expression is then evaluated and returned.  If no matches can be found a final last expression can be provided that is  then evaluated and returned. Otherwise, nil is returned.", PhelCompletionPriority.CONTROL_FLOW, "core"),
            DataFunction("coerce-in", "(coerce-in v min max)", "Returns `v` if it is in the range, or `min` if `v` is less than `min`, or `max` if `v` is greater than `max`.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("comment", "(comment &)", "Ignores the body of the comment.", PhelCompletionPriority.MACROS, "core"),
            DataFunction("comp", "(comp & fs)", "Takes a list of functions and returns a function that is the composition of those functions.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("compare", "(compare x y)", "An integer less than, equal to, or greater than zero when `x` is less than, equal to, or greater than `y`, respectively.", PhelCompletionPriority.ARITHMETIC_FUNCTIONS, "core"),
            DataFunction("compile", "(compile form)", "Returns the compiled PHP code string for the given form.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("complement", "(complement f)", "Returns a function that takes the same arguments as `f` and returns the opposite truth value.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("concat", "(concat arr & xs)", "Concatenates multiple sequential data structures.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("cond", "(cond & pairs)", "Takes a set of test/expression pairs. Evaluates each test one at a time.  If a test returns logically true, the expression is evaluated and returned.  If no test matches a final last expression can be provided that is then  evaluated and returned. Otherwise, nil is returned.", PhelCompletionPriority.CONTROL_FLOW, "core"),
            DataFunction("cons", "(cons x xs)", "Prepends `x` to the beginning of `xs`.", PhelCompletionPriority.COLLECTION_FUNCTIONS, "core"),
            DataFunction("constantly", "(constantly x)", "Returns a function that always returns `x` and ignores any passed arguments.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("contains-value?", "(contains-value? coll val)", "Returns true if the value is present in the given collection, otherwise returns false.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("contains?", "(contains? coll key)", "Returns true if key is present in the given collection, otherwise returns false.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("count", "(count xs)", "Counts the number of elements in a sequence. Can be used on everything that implements the PHP Countable interface.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("dec", "(dec x)", "Decrements `x` by one.", PhelCompletionPriority.ARITHMETIC_FUNCTIONS, "core"),
            DataFunction("declare", "", "Declare a global symbol before it is defined.", PhelCompletionPriority.MACROS, "core"),
            DataFunction("dedupe", "(dedupe xs)", "Returns a vector with consecutive duplicate values removed in `xs`.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("deep-merge", "(deep-merge & args)", "Recursively merges data structures.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("def", "(def name meta? value)", "This special form binds a value to a global symbol.", PhelCompletionPriority.SPECIAL_FORMS, "core"),
            DataFunction("def-", "(def- name value)", "Define a private value that will not be exported.", PhelCompletionPriority.SPECIAL_FORMS, "core"),
            DataFunction("defexception", "(defexception name)", "Define a new exception.", PhelCompletionPriority.SPECIAL_FORMS, "core"),
            DataFunction("defexception*", "(defexception name)", "Defines a new exception.", PhelCompletionPriority.SPECIAL_FORMS, "core"),
            DataFunction("definterface", "(definterface name & fns)", "Defines an interface.", PhelCompletionPriority.SPECIAL_FORMS, "core"),
            DataFunction("definterface*", "(definterface name & fns)", "An interface in Phel defines an abstract set of functions. It is directly mapped to a PHP interface. An interface can be defined by using the definterface macro.", PhelCompletionPriority.SPECIAL_FORMS, "core"),
            DataFunction("defmacro", "(defmacro name & fdecl)", "Define a macro.", PhelCompletionPriority.SPECIAL_FORMS, "core"),
            DataFunction("defmacro-", "(defmacro- name & fdecl)", "Define a private macro that will not be exported.", PhelCompletionPriority.SPECIAL_FORMS, "core"),
            DataFunction("defn", "(defn name & fdecl)", "Define a new global function.", PhelCompletionPriority.SPECIAL_FORMS, "core"),
            DataFunction("defn-", "(defn- name & fdecl)", "Define a private function that will not be exported.", PhelCompletionPriority.SPECIAL_FORMS, "core"),
            DataFunction("defstruct", "(defstruct name keys & implementations)", "Define a new struct.", PhelCompletionPriority.SPECIAL_FORMS, "core"),
            DataFunction("defstruct*", "(defstruct my-struct [a b c])", "A Struct is a special kind of Map. It only supports a predefined number of keys and is associated to a global name. The Struct not only defines itself but also a predicate function.", PhelCompletionPriority.SPECIAL_FORMS, "core"),
            DataFunction("deref", "(deref variable)", "Return the value inside the variable.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("difference", "(difference set & sets)", "Difference between multiple sets into a new one.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("difference-pair", "(difference-pair s1 s2)", "", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("dissoc", "(dissoc ds key)", "Alias for `unset`.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("dissoc-in", "(dissoc-in ds ks)", "Alias for `unset-in`.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("distinct", "(distinct xs)", "Returns a vector with duplicated values removed in `xs`.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("do", "(do expr*)", "Evaluates the expressions in order and returns the value of the last expression. If no expression is given, nil is returned.", PhelCompletionPriority.CONTROL_FLOW, "core"),
            DataFunction("dofor", "(dofor head & body)", "Repeatedly executes body for side effects with bindings and modifiers as  provided by for. Returns nil.", PhelCompletionPriority.CONTROL_FLOW, "core"),
            DataFunction("doto", "(doto x & forms)", "Evaluates x then calls all of the methods and functions with the  value of x supplied at the front of the given arguments. The forms  are evaluated in order. Returns x.", PhelCompletionPriority.MACROS, "core"),
            DataFunction("drop", "(drop n xs)", "Drops the first `n` elements of `xs`.", PhelCompletionPriority.COLLECTION_FUNCTIONS, "core"),
            DataFunction("drop-last", "(drop-last n xs)", "Drops the last `n` elements of `xs`.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("drop-while", "(drop-while pred xs)", "Drops all elements at the front `xs` where `(pred x)` is true.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("empty?", "(empty? x)", "Returns true if x would be 0, \"\" or empty collection, false otherwise.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("eval", "(eval form)", "Evaluates a form and return the evaluated results.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("even?", "(even? x)", "Checks if `x` is even.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("every?", "(every? pred xs)", "Alias for `all?`.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("extreme", "(extreme order args)", "Returns the most extreme value in `args` based on the binary `order` function.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("false?", "(false? x)", "Checks if `x` is false. Same as `x === false` in PHP.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("ffirst", "(ffirst xs)", "Same as `(first (first xs))`.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("filter", "(filter pred xs)", "Returns all elements of `xs` where `(pred x)` is true.", PhelCompletionPriority.COLLECTION_FUNCTIONS, "core"),
            DataFunction("find", "(find pred xs)", "Returns the first item in `xs` where `(pred item)` evaluates to true.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("find-index", "(find-index pred xs)", "Returns the index of the first item in `xs` where `(pred index item)` evaluates to true.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("first", "(first xs)", "Returns the first element of an indexed sequence or nil.", PhelCompletionPriority.COLLECTION_FUNCTIONS, "core"),
            DataFunction("flatten", "(flatten xs)", "Takes a nested sequential data structure `(tree)`, and returns their contents  as a single, flat vector.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("float?", "(float? x)", "Returns true if `x` is float point number, false otherwise.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("fn", "(fn [params*] expr*)", "Defines a function. A function consists of a list of parameters and a list of expression. The value of the last expression is returned as the result of the function. All other expression are only evaluated for side effects. If no expression is given, the function returns nil.", PhelCompletionPriority.SPECIAL_FORMS, "core"),
            DataFunction("for", "", "", PhelCompletionPriority.CONTROL_FLOW, "core"),
            DataFunction("foreach", "(foreach [key value valueExpr] expr*)", "The foreach special form can be used to iterate over all kind of PHP datastructures. The return value of foreach is always nil. The loop special form should be preferred of the foreach special form whenever possible.", PhelCompletionPriority.CONTROL_FLOW, "core"),
            DataFunction("format", "(format fmt & xs)", "Returns a formatted string. See PHP's <a href=\"https://www.php.net/manual/en/function.sprintf.php\">sprintf</a> for more information.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("frequencies", "(frequencies xs)", "Returns a map from distinct items in `xs` to the number of times they appear.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("full-name", "(full-name x)", "Return the namespace and name string of a string, keyword or symbol.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("function?", "(function? x)", "Returns true if `x` is a function, false otherwise.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("gensym", "(gensym )", "Generates a new unique symbol.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("get", "(get ds k & [opt])", "Get the value mapped to `key` from the datastructure `ds`.  Returns `opt` or nil if the value cannot be found.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("get-in", "(get-in ds ks & [opt])", "Access a value in a nested data structure. Looks into the data structure via a sequence of keys.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("group-by", "(group-by f xs)", "Returns a map of the elements of xs keyed by the result of  f on each element.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("hash-map", "(hash-map & xs) # {& xs}", "Creates a new hash map. If no argument is provided, an empty hash map is created. The number of parameters must be even.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("hash-map?", "(hash-map? x)", "Returns true if `x` is a hash map, false otherwise.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("id", "(id a & more)", "Checks if all values are identical. Same as `a === b` in PHP.", PhelCompletionPriority.MACROS, "core"),
            DataFunction("identity", "(identity x)", "Returns its argument.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("if", "(if test then else?)", "A control flow structure. First evaluates test. If test evaluates to true, only the then form is evaluated and the result is returned. If test evaluates to false only the else form is evaluated and the result is returned. If no else form is given, nil will be returned.", PhelCompletionPriority.CONTROL_FLOW, "core"),
            DataFunction("if-let", "(if-let bindings then & [else])", "If test is true, evaluates then with binding-form bound to the value of test,  if not, yields else", PhelCompletionPriority.CONTROL_FLOW, "core"),
            DataFunction("if-not", "(if-not test then & [else])", "Shorthand for `(if (not condition) else then)`.", PhelCompletionPriority.CONTROL_FLOW, "core"),
            DataFunction("inc", "(inc x)", "Increments `x` by one.", PhelCompletionPriority.ARITHMETIC_FUNCTIONS, "core"),
            DataFunction("indexed?", "(indexed? x)", "Returns true if `x` is indexed sequence, false otherwise.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("int?", "(int? x)", "Returns true if `x` is an integer number, false otherwise.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("interleave", "(interleave & xs)", "Returns a vector with the first items of each col, then the second items, etc.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("interpose", "(interpose sep xs)", "Returns a vector of elements separated by `sep`.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("intersection", "(intersection set & sets)", "Intersect multiple sets into a new one.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("into", "(into to & rest)", "Returns `to` with all elements of `from` added.   When `from` is associative, it is treated as a sequence of key-value pairs.   Supports persistent and transient collections.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("invert", "(invert map)", "Returns a new map where the keys and values are swapped. If map has  duplicated values, some keys will be ignored.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("iterate", "(iterate f x)", "Returns an infinite sequence of x, (f x), (f (f x)), and so on.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("juxt", "(juxt & fs)", "Takes a list of functions and returns a new function that is the juxtaposition of those functions.  `((juxt a b c) x) => [(a x) (b x) (c x)]`.", PhelCompletionPriority.MACROS, "core"),
            DataFunction("keep", "(keep pred xs)", "Returns a list of non-nil results of `(pred x)`.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("keep-indexed", "(keep-indexed pred xs)", "Returns a list of non-nil results of `(pred i x)`.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("keys", "(keys xs)", "Gets the keys of an associative data structure.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("keyword", "(keyword x)", "Creates a new Keyword from a given string.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("keyword?", "(keyword? x)", "Returns true if `x` is a keyword, false otherwise.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("kvs", "(kvs xs)", "Returns a vector of key-value pairs like `[k1 v1 k2 v2 k3 v3 ...]`.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("last", "(last xs)", "Returns the last element of `xs` or nil if `xs` is empty or nil.", PhelCompletionPriority.COLLECTION_FUNCTIONS, "core"),
            DataFunction("let", "(let [bindings*] expr*)", "Creates a new lexical context with assignments defined in bindings. Afterwards the list of expressions is evaluated and the value of the last expression is returned. If no expression is given nil is returned.", PhelCompletionPriority.SPECIAL_FORMS, "core"),
            DataFunction("list", "(list & xs) # '(& xs)", "Creates a new list. If no argument is provided, an empty list is created.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("list?", "(list? x)", "Returns true if `x` is a list, false otherwise.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("loop", "(loop [bindings*] expr*)", "Creates a new lexical context with variables defined in bindings and defines a recursion point at the top of the loop.", PhelCompletionPriority.CONTROL_FLOW, "core"),
            DataFunction("macroexpand", "(macroexpand form)", "Recursively expands the given form until it is no longer a macro call.", PhelCompletionPriority.SPECIAL_FORMS, "core"),
            DataFunction("macroexpand-1", "(macroexpand-1 form)", "Expands the given form once if it is a macro call.", PhelCompletionPriority.SPECIAL_FORMS, "core"),
            DataFunction("map", "(map f & xs)", "Returns an array consisting of the result of applying `f` to all of the first items in each `xs`,   followed by applying `f` to all the second items in each `xs` until anyone of the `xs` is exhausted.", PhelCompletionPriority.COLLECTION_FUNCTIONS, "core"),
            DataFunction("map-indexed", "(map-indexed f xs)", "Applies `f` to each element in `xs`. `f` is a two-argument function. The first argument  is an index of the element in the sequence and the second element is the element itself.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("mapcat", "(mapcat f & xs)", "Applies `f` on all `xs` and concatenate the result.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("max", "(max & numbers)", "Returns the numeric maximum of all numbers.", PhelCompletionPriority.ARITHMETIC_FUNCTIONS, "core"),
            DataFunction("mean", "(mean xs)", "Returns the mean of `xs`.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("median", "(median xs)", "Returns the median of `xs`.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("memoize", "(memoize f)", "Returns a memoized version of the function `f`. The memoized function  caches the return value for each set of arguments.", PhelCompletionPriority.MACROS, "core"),
            DataFunction("merge", "(merge & maps)", "Merges multiple maps into one new map. If a key appears in more than one  collection, then later values replace any previous ones.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("merge-with", "(merge-with f & hash-maps)", "Merges multiple maps into one new map. If a key appears in more than one   collection, the result of `(f current-val next-val)` is used.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("meta", "(meta obj)", "Gets the metadata of the given object or definition.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("min", "(min & numbers)", "Returns the numeric minimum of all numbers.", PhelCompletionPriority.ARITHMETIC_FUNCTIONS, "core"),
            DataFunction("name", "(name x)", "Returns the name string of a string, keyword or symbol.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("namespace", "(namespace x)", "Return the namespace string of a symbol or keyword. Nil if not present.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("nan?", "(nan? x)", "Checks if `x` is not a number.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("neg?", "(neg? x)", "Checks if `x` is smaller than zero.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("next", "(next xs)", "Returns the sequence of elements after the first element. If there are no elements, returns nil.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("nfirst", "(nfirst xs)", "Same as `(next (first xs))`.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("nil?", "(nil? x)", "Returns true if `x` is nil, false otherwise.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("nnext", "(nnext xs)", "Same as `(next (next xs))`.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("not", "(not x)", "The `not` function returns `true` if the given value is logical false and `false` otherwise.", PhelCompletionPriority.ARITHMETIC_FUNCTIONS, "core"),
            DataFunction("not-any?", "(not-any? pred xs)", "Returns true if `(pred x)` is logical false for every `x` in `xs`   or if `xs` is empty. Otherwise returns false.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("not-empty", "(not-empty coll)", "Returns `coll` if it contains elements, otherwise nil.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("not-every?", "(not-every? pred xs)", "Returns false if `(pred x)` is logical true for every `x` in collection `xs`   or if `xs` is empty. Otherwise returns true.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("not=", "(not= a & more)", "Checks if all values are unequal. Same as `a != b` in PHP.", PhelCompletionPriority.ARITHMETIC_FUNCTIONS, "core"),
            DataFunction("ns", "(ns name imports*)", "Defines the namespace for the current file and adds imports to the environment. Imports can either be uses or requires. The keyword :use is used to import PHP classes, the keyword :require is used to import Phel modules and the keyword :require-file is used to load php files.", PhelCompletionPriority.SPECIAL_FORMS, "core"),
            DataFunction("number?", "(number? x)", "Returns true if `x` is a number, false otherwise.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("odd?", "(odd? x)", "Checks if `x` is odd.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("one?", "(one? x)", "Checks if `x` is one.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("or", "(or & args)", "Evaluates each expression one at a time, from left to right. If a formreturns a logical true value, or returns that value and doesn't evaluate any ofthe other expressions, otherwise, it returns the value of the last expression.Calling or without arguments, returns nil.", PhelCompletionPriority.MACROS, "core"),
            DataFunction("pairs", "(pairs xs)", "Gets the pairs of an associative data structure.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("partial", "(partial f & args)", "Takes a function `f` and fewer than normal arguments of `f` and returns a function  that a variable number of additional arguments. When call `f` will be called  with `args` and the additional arguments.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("partition", "(partition n xs)", "Partition an indexed data structure into vectors of maximum size n. Returns a new vector.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("partition-by", "(partition-by f xs)", "Applies `f` to each value in `xs`, splitting them each time the return value changes.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("peek", "(peek xs)", "Returns the last element of a sequence.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("persistent", "(persistent coll)", "Converts a transient collection to a persistent collection.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("phel->php", "(phel->php x)", "Recursively converts a Phel data structure to a PHP array.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("php->phel", "(php->phel x)", "Recursively converts a PHP array to Phel data structures.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("php-array-to-map", "(php-array-to-map arr)", "Converts a PHP Array to a map.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("php-array?", "(php-array? x)", "Returns true if `x` is a PHP Array, false otherwise.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("php-associative-array", "(php-associative-array & xs)", "Creates a PHP associative array. An even number of parameters must be provided.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("php-indexed-array", "(php-indexed-array & xs)", "Creates a PHP indexed array from the given values.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("php-object?", "(php-object? x)", "Returns true if `x` is a PHP object, false otherwise.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("php-resource?", "(php-resource? x)", "Returns true if `x` is a PHP resource, false otherwise.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("pop", "(pop xs)", "Removes the last element of the array `xs`. If the array is empty returns nil.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("pos?", "(pos? x)", "Checks if `x` is greater than zero.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("print", "(print & xs)", "Prints the given values to the default output stream. Returns nil.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("print-str", "(print-str & xs)", "Same as print. But instead of writing it to an output stream, the resulting string is returned.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("printf", "(printf fmt & xs)", "Output a formatted string. See PHP's <a href=\"https://www.php.net/manual/en/function.printf.php\">printf</a> for more information.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("println", "(println & xs)", "Same as print followed by a newline.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("push", "(push xs x)", "Inserts `x` at the end of the sequence `xs`.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("put", "(put ds key value)", "Puts `value` mapped to `key` on the datastructure `ds`. Returns `ds`.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("put-in", "(put-in ds [k & ks] v)", "Puts a value into a nested data structure.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("quote", "(NAME_QUOTE)", "NAME_QUOTE description", PhelCompletionPriority.SPECIAL_FORMS, "core"),
            DataFunction("rand", "(rand )", "Returns a random number between 0 and 1.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("rand-int", "(rand-int n)", "Returns a random number between 0 and `n`.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("rand-nth", "(rand-nth xs)", "Returns a random item from xs.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("range", "(range a & rest)", "Create an array of values `[start, end)`. If the function has one argument then  the range `[0, end)` is returned. With two arguments, returns `[start, end)`.  The third argument is an optional step width (default 1).", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("re-seq", "(re-seq re s)", "Returns a sequence of successive matches of pattern in string.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("read-string", "(read-string s)", "Reads the first phel expression from the string s.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("recur", "(recur expr*)", "Internally recur is implemented as a PHP while loop and therefore prevents the Maximum function nesting level errors.", PhelCompletionPriority.CONTROL_FLOW, "core"),
            DataFunction("reduce", "(reduce f & xs)", "(reduce f coll) (reduce f val coll)    f should be a function of 2 arguments. If val is not supplied, returns the result of applying f to the first 2 items in coll, then applying f to that result and the 3rd item, etc.    If coll contains no items, f must accept no arguments as well, and reduce returns the result of calling f with no arguments. If coll has only 1 item, it is returned and f is not called.    If val is supplied, returns the result of applying f to val and the first item in coll, then applying f to that result and the 2nd item, etc. If coll contains no items, returns val and f is not called.", PhelCompletionPriority.COLLECTION_FUNCTIONS, "core"),
            DataFunction("remove", "(remove xs offset & [n])", "Removes up to `n` element from array `xs` starting at index `offset`.", PhelCompletionPriority.COLLECTION_FUNCTIONS, "core"),
            DataFunction("repeat", "(repeat a & rest)", "Returns a vector of length n where every element is x.  With one argument returns an infinite sequence of x.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("repeatedly", "(repeatedly a & rest)", "Returns a vector of length n with values produced by repeatedly calling f.  With one argument returns an infinite sequence of calls to f.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("rest", "(rest xs)", "Returns the sequence of elements after the first element. If there are no elements, returns an empty sequence.", PhelCompletionPriority.COLLECTION_FUNCTIONS, "core"),
            DataFunction("reverse", "(reverse xs)", "Reverses the order of the elements in the given sequence.", PhelCompletionPriority.COLLECTION_FUNCTIONS, "core"),
            DataFunction("second", "(second xs)", "Returns the second element of an indexed sequence or nil.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("select-keys", "(select-keys m ks)", "Returns a new map including key value pairs from `m` selected with of keys `ks`.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("set", "(set & xs)", "Creates a new Set. If no argument is provided, an empty Set is created.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("set!", "(set! variable value)", "Sets a new value to the given variable.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("set-meta!", "(set-meta! obj)", "Sets the metadata to a given object.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("set-var", "(var value)", "Variables provide a way to manage mutable state. Each variable contains a single value. To create a variable use the var function.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("set?", "(set? x)", "Returns true if `x` is a set, false otherwise.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("shuffle", "(shuffle xs)", "Returns a random permutation of xs.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("slice", "(slice xs & [offset & [length]])", "Extract a slice of `xs`.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("slurp", "(slurp filename & [opts])", "Reads entire file into a string. Accepts `opts` map for overriding default  PHP file_get_contents arguments.  See PHP's <a href=\"https://www.php.net/manual/en/function.file-get-contents.php\">file_get_contents</a> for more information.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("some", "(some pred xs)", "Returns the first logical true value of `(pred x)` for any `x` in `xs`, else nil.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("some->", "(some-> x & forms)", "Threads `x` through the forms like `->` but stops when a form returns `nil`.", PhelCompletionPriority.MACROS, "core"),
            DataFunction("some->>", "(some->> x & forms)", "Threads `x` through the forms like `->>` but stops when a form returns `nil`.", PhelCompletionPriority.MACROS, "core"),
            DataFunction("some?", "(some? pred xs)", "Returns true if `(pred x)` is logical true for at least one `x` in `xs`, else false.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("sort", "(sort xs & [comp])", "Returns a sorted vector. If no comparator is supplied compare is used.", PhelCompletionPriority.COLLECTION_FUNCTIONS, "core"),
            DataFunction("sort-by", "(sort-by keyfn xs & [comp])", "Returns a sorted vector where the sort order is determined by comparing  `(keyfn item)`. If no comparator is supplied compare is used.", PhelCompletionPriority.COLLECTION_FUNCTIONS, "core"),
            DataFunction("spit", "(spit filename data & [opts])", "Writes data to file, returning number of bytest that were written or `nil`  on failure. Accepts `opts` map for overriding default PHP file_put_contents  arguments, as example to append to file use {:flags php/FILE_APPEND}.  See PHP's <a href=\"https://www.php.net/manual/en/function.file-put-contents.php\">file_put_contents</a> for more information.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("split-at", "(split-at n xs)", "Returns a vector of `[(take n coll) (drop n coll)]`.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("split-with", "(split-with f xs)", "Returns a vector of `[(take-while pred coll) (drop-while pred coll)]`.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("str", "(str & args)", "Creates a string by concatenating values together. If no arguments areprovided an empty string is returned. Nil and false are represented as an emptystring. True is represented as 1. Otherwise, it tries to call `__toString`.This is PHP equivalent to `\$args[0] . \$args[1] . \$args[2] ...`.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("str-contains?", "(str-contains? str s)", "Returns true if str contains s.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("string?", "(string? x)", "Returns true if `x` is a string, false otherwise.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("struct?", "(struct? x)", "Returns true if `x` is a struct, false otherwise.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("sum", "(sum xs)", "Returns the sum of all elements is `xs`.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("swap!", "(swap! variable f & args)", "Swaps the value of the variable to `(apply f current-value args)`. Returns the values that are swapped in.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("symbol", "(symbol name-or-ns & [name])", "Returns a new symbol for given string with optional namespace.   Arity-1 returns a symbol without namespace. Arity-2 returns a symbol in given namespace.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("symbol?", "(symbol? x)", "Returns true if `x` is a symbol, false otherwise.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("symmetric-difference", "(symmetric-difference set & sets)", "Symmetric difference between multiple sets into a new one.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("take", "(take n xs)", "Takes the first `n` elements of `xs`.", PhelCompletionPriority.COLLECTION_FUNCTIONS, "core"),
            DataFunction("take-last", "(take-last n xs)", "Takes the last `n` elements of `xs`.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("take-nth", "(take-nth n xs)", "Returns every nth item in `xs`.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("take-while", "(take-while pred xs)", "Takes all elements at the front of `xs` where `(pred x)` is true.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("throw", "(throw exception)", "Throw an exception.", PhelCompletionPriority.CONTROL_FLOW, "core"),
            DataFunction("time", "(time expr)", "Evaluates expr and prints the time it took. Returns the value of expr.", PhelCompletionPriority.MACROS, "core"),
            DataFunction("to-php-array", "(to-php-array xs)", "Create a PHP Array from a sequential data structure.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("transient", "(transient coll)", "Converts a persistent collection to a transient collection.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("tree-seq", "(tree-seq branch? children root)", "Returns a vector of the nodes in the tree, via a depth-first walk.  branch? is a function with one argument that returns true if the given node  has children.  children must be a function with one argument that returns the children of the node.  root the root node of the tree.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("true?", "(true? x)", "Checks if `x` is true. Same as `x === true` in PHP.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("truthy?", "(truthy? x)", "Checks if `x` is truthy. Same as `x == true` in PHP.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("try", "(try expr* catch-clause* finally-clause?)", "All expressions are evaluated and if no exception is thrown the value of the last expression is returned. If an exception occurs and a matching catch-clause is provided, its expression is evaluated and the value is returned. If no matching catch-clause can be found the exception is propagated out of the function. Before returning normally or abnormally the optionally finally-clause is evaluated.", PhelCompletionPriority.CONTROL_FLOW, "core"),
            DataFunction("type", "(type x)", "Returns the type of `x`. The following types can be returned:* `:vector`* `:list`* `:struct`* `:hash-map`* `:set`* `:keyword`* `:symbol`* `:var`* `:int`* `:float`* `:string`* `:nil`* `:boolean`* `:function`* `:php/array`* `:php/resource`* `:php/object`* `:unknown`", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("union", "(union & sets)", "Union multiple sets into a new one.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("unquote", "(unquote my-sym)", "Values that should be evaluated in a macro are marked with the unquote function (shorthand ,).", PhelCompletionPriority.SPECIAL_FORMS, "core"),
            DataFunction("unquote-splicing", "(unquote-splicing my-sym)", "Values that should be evaluated in a macro are marked with the unquote function (shorthand ,@).", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("unset", "(unset ds key)", "Returns `ds` without `key`.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("unset-in", "(unset-in ds [k & ks])", "Removes a value from a nested data structure.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("update", "(update ds k f & args)", "Updates a value in a datastructure by applying `f` to the current element and replacing it with the result of `f`.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("update-in", "(update-in ds [k & ks] f & args)", "Updates a value into a nested data structure.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("values", "(values xs)", "Gets the values of an associative data structure.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("var", "(var value)", "Creates a new variable with the given value.", PhelCompletionPriority.SPECIAL_FORMS, "core"),
            DataFunction("var?", "(var? x)", "Checks if the given value is a variable.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("vector", "(vector & xs) # [& xs]", "Creates a new vector. If no argument is provided, an empty vector is created.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("vector?", "(vector? x)", "Returns true if `x` is a vector, false otherwise.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("when", "(when test & body)", "Evaluates `test` and if that is logical true, evaluates `body`.", PhelCompletionPriority.CONTROL_FLOW, "core"),
            DataFunction("when-let", "(when-let bindings & body)", "When test is true, evaluates body with binding-form bound to the value of test", PhelCompletionPriority.CONTROL_FLOW, "core"),
            DataFunction("when-not", "(when-not test & body)", "Evaluates `test` and if that is logical false, evaluates `body`.", PhelCompletionPriority.CONTROL_FLOW, "core"),
            DataFunction("with-output-buffer", "(with-output-buffer & body)", "Everything that is printed inside the body will be stored in a buffer.   The result of the buffer is returned.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("zero?", "(zero? x)", "Checks if `x` is zero.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("zipcoll", "(zipcoll a b)", "Creates a map from two sequential data structures. Return a new map.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
            DataFunction("zipmap", "(zipmap keys vals)", "Returns a new map with the keys mapped to the corresponding values. Stops when the shorter of `keys` or `vals` is exhausted.", PhelCompletionPriority.CORE_FUNCTIONS, "core"),
        )
    }

    private fun registerHtmlFunctions() {
        functions[Namespace.HTML] = listOf(
            DataFunction("html/doctype", "(doctype type)", "", PhelCompletionPriority.HTML_FUNCTIONS, "html"),
            DataFunction("html/escape-html", "(escape-html s)", "Escapes the string that may contain HTML.", PhelCompletionPriority.HTML_FUNCTIONS, "html"),
            DataFunction("html/html", "(html & content)", "", PhelCompletionPriority.HTML_FUNCTIONS, "html"),
            DataFunction("html/raw-string", "(raw-string s)", "Creates a new raw-string struct.", PhelCompletionPriority.HTML_FUNCTIONS, "html"),
            DataFunction("html/raw-string?", "(raw-string? x)", "Checks if `x` is an instance of the raw-string struct.", PhelCompletionPriority.HTML_FUNCTIONS, "html"),
        )
    }

    private fun registerHttpFunctions() {
        functions[Namespace.HTTP] = listOf(
            DataFunction("http/create-response-from-map", "", "", PhelCompletionPriority.HTTP_FUNCTIONS, "http"),
            DataFunction("http/create-response-from-string", "", "", PhelCompletionPriority.HTTP_FUNCTIONS, "http"),
            DataFunction("http/emit-response", "(emit-response response)", "Emits the response.", PhelCompletionPriority.HTTP_FUNCTIONS, "http"),
            DataFunction("http/files-from-globals", "(files-from-globals & [files])", "Extracts the files from `\$_FILES` and normalizes them to a map of \"uploaded-file\".", PhelCompletionPriority.HTTP_FUNCTIONS, "http"),
            DataFunction("http/headers-from-server", "(headers-from-server & [server])", "Extracts all headers from the `\$_SERVER` variable.", PhelCompletionPriority.HTTP_FUNCTIONS, "http"),
            DataFunction("http/request", "(request method uri headers parsed-body query-params cookie-params server-params uploaded-files version attributes)", "Creates a new request struct.", PhelCompletionPriority.HTTP_FUNCTIONS, "http"),
            DataFunction("http/request-from-globals", "(request-from-globals )", "Extracts a request from `\$_SERVER`, `\$_GET`, `\$_POST`, `\$_COOKIE` and `\$_FILES`.", PhelCompletionPriority.HTTP_FUNCTIONS, "http"),
            DataFunction("http/request-from-globals-args", "(request-from-globals-args server get-parameter post-parameter cookies files)", "Extracts a request from args.", PhelCompletionPriority.HTTP_FUNCTIONS, "http"),
            DataFunction("http/request-from-map", "(request-from-map {:method method, :version version, :uri uri, :headers headers, :parsed-body parsed-body, :query-params query-params, :cookie-params cookie-params, :server-params server-params, :uploaded-files uploaded-files, :attributes attributes})", "", PhelCompletionPriority.HTTP_FUNCTIONS, "http"),
            DataFunction("http/request?", "(request? x)", "Checks if `x` is an instance of the request struct.", PhelCompletionPriority.HTTP_FUNCTIONS, "http"),
            DataFunction("http/response", "(response status headers body version reason)", "Creates a new response struct.", PhelCompletionPriority.HTTP_FUNCTIONS, "http"),
            DataFunction("http/response-from-map", "(response-from-map {:status status, :headers headers, :body body, :version version, :reason reason})", "Creates a response struct from a map. The map can have the following keys:  * `:status` The HTTP Status (default 200)  * `:headers` A map of HTTP Headers (default: empty map)  * `:body` The body of the response (default: empty string)  * `:version` The HTTP Version (default: 1.1)  * `:reason` The HTTP status reason. If not provided a common status reason is taken", PhelCompletionPriority.HTTP_FUNCTIONS, "http"),
            DataFunction("http/response-from-string", "(response-from-string s)", "Create a response from a string.", PhelCompletionPriority.HTTP_FUNCTIONS, "http"),
            DataFunction("http/response?", "(response? x)", "Checks if `x` is an instance of the response struct.", PhelCompletionPriority.HTTP_FUNCTIONS, "http"),
            DataFunction("http/uploaded-file", "(uploaded-file tmp-file size error-status client-filename client-media-type)", "Creates a new uploaded-file struct.", PhelCompletionPriority.HTTP_FUNCTIONS, "http"),
            DataFunction("http/uploaded-file?", "(uploaded-file? x)", "Checks if `x` is an instance of the uploaded-file struct.", PhelCompletionPriority.HTTP_FUNCTIONS, "http"),
            DataFunction("http/uri", "(uri scheme userinfo host port path query fragment)", "Creates a new uri struct.", PhelCompletionPriority.HTTP_FUNCTIONS, "http"),
            DataFunction("http/uri-from-globals", "(uri-from-globals & [server])", "Extracts the URI from the `\$_SERVER` variable.", PhelCompletionPriority.HTTP_FUNCTIONS, "http"),
            DataFunction("http/uri-from-string", "(uri-from-string url)", "Create a uri struct from a string", PhelCompletionPriority.HTTP_FUNCTIONS, "http"),
            DataFunction("http/uri?", "(uri? x)", "Checks if `x` is an instance of the uri struct.", PhelCompletionPriority.HTTP_FUNCTIONS, "http"),
        )
    }

    private fun registerJsonFunctions() {
        functions[Namespace.JSON] = listOf(
            DataFunction("json/decode", "(decode json & [{:flags flags, :depth depth}])", "Decodes a JSON string.", PhelCompletionPriority.JSON_FUNCTIONS, "json"),
            DataFunction("json/decode-value", "(decode-value x)", "Convert a json data structure to a 'phel compatible' value.", PhelCompletionPriority.JSON_FUNCTIONS, "json"),
            DataFunction("json/encode", "(encode value & [{:flags flags, :depth depth}])", "Returns the JSON representation of a value.", PhelCompletionPriority.JSON_FUNCTIONS, "json"),
            DataFunction("json/encode-value", "(encode-value x)", "Convert a Phel data type to a 'json compatible' value.", PhelCompletionPriority.JSON_FUNCTIONS, "json"),
            DataFunction("json/valid-key?", "(valid-key? v)", "Checks if `v` is a valid JSON key or can be converted to a JSON key.", PhelCompletionPriority.JSON_FUNCTIONS, "json"),
        )
    }

    private fun registerPhpInteropFunctions() {
        functions[Namespace.PHP] = listOf(
            DataFunction("php/->", "(php/-> object call*)", "Access to an object property or result of chained calls.", PhelCompletionPriority.PHP_INTEROP, "php"),
            DataFunction("php/::", "(php/:: class call*)", "Calls a static method or property from a PHP class. Both methodname and property must be symbols and cannot be an evaluated value.", PhelCompletionPriority.PHP_INTEROP, "php"),
            DataFunction("php/aget", "(php/aget arr index)", "Equivalent to PHP's `arr[index] ?? null`.", PhelCompletionPriority.PHP_INTEROP, "php"),
            DataFunction("php/aget-in", "(php/aget-in arr ks)", "Equivalent to PHP's `arr[k1][k2][k...] ?? null`.", PhelCompletionPriority.PHP_INTEROP, "php"),
            DataFunction("php/apush", "(php/apush arr value)", "Equivalent to PHP's arr[] = value.", PhelCompletionPriority.PHP_INTEROP, "php"),
            DataFunction("php/apush-in", "(php/apush-in arr ks value)", "Equivalent to PHP's `arr[k1][k2][k...][] = value`.", PhelCompletionPriority.PHP_INTEROP, "php"),
            DataFunction("php/aset", "(php/aset arr index value)", "Equivalent to PHP's `arr[index] = value`.", PhelCompletionPriority.PHP_INTEROP, "php"),
            DataFunction("php/aset-in", "(php/aset-in arr ks value)", "Equivalent to PHP's `arr[k1][k2][k...] = value`.", PhelCompletionPriority.PHP_INTEROP, "php"),
            DataFunction("php/aunset", "(php/aunset arr index)", "Equivalent to PHP's `unset(arr[index])`.", PhelCompletionPriority.PHP_INTEROP, "php"),
            DataFunction("php/aunset-in", "(php/aunset-in arr ks)", "Equivalent to PHP's `unset(arr[k1][k2][k...])`.", PhelCompletionPriority.PHP_INTEROP, "php"),
            DataFunction("php/new", "(php/new expr args*)", "Evaluates expr and creates a new PHP class using the arguments. The instance of the class is returned.", PhelCompletionPriority.PHP_INTEROP, "php"),
            DataFunction("php/oset", "(php/oset (php/-> object prop) val)", "Use `php/oset` to set a value to a class/object property.", PhelCompletionPriority.PHP_INTEROP, "php"),
        )
    }

    private fun registerReplFunctions() {
        functions[Namespace.REPL] = listOf(
            DataFunction("repl/build-facade", "", "", PhelCompletionPriority.REPL_FUNCTIONS, "repl"),
            DataFunction("repl/compile-str", "(compile-str s)", "", PhelCompletionPriority.REPL_FUNCTIONS, "repl"),
            DataFunction("repl/doc", "(doc sym)", "Prints the documentation for the given symbol.", PhelCompletionPriority.REPL_FUNCTIONS, "repl"),
            DataFunction("repl/loaded-namespaces", "(loaded-namespaces )", "Return all namespaces currently loaded in the REPL.", PhelCompletionPriority.REPL_FUNCTIONS, "repl"),
            DataFunction("repl/print-colorful", "(print-colorful & xs)", "Colored print.", PhelCompletionPriority.REPL_FUNCTIONS, "repl"),
            DataFunction("repl/println-colorful", "(println-colorful & xs)", "Colored println.", PhelCompletionPriority.REPL_FUNCTIONS, "repl"),
            DataFunction("repl/require", "(require sym & args)", "Requires a Phel module into the environment.", PhelCompletionPriority.REPL_FUNCTIONS, "repl"),
            DataFunction("repl/resolve", "(resolve sym)", "Resolves the given symbol in the current environment and returns a   resolved Symbol with the absolute namespace or nil if it cannot be resolved.", PhelCompletionPriority.REPL_FUNCTIONS, "repl"),
            DataFunction("repl/use", "(use sym & args)", "Adds a use statement to the environment.", PhelCompletionPriority.REPL_FUNCTIONS, "repl"),
        )
    }

    private fun registerStringFunctions() {
        functions[Namespace.STR] = listOf(
            DataFunction("str/blank?", "(blank? s)", "True if s is nil, empty, or contains only whitespace.", PhelCompletionPriority.STRING_FUNCTIONS, "str"),
            DataFunction("str/capitalize", "(capitalize s)", "Converts first character of the string to upper-case, all other  characters to lower-case. Handles multibyte characters.", PhelCompletionPriority.STRING_FUNCTIONS, "str"),
            DataFunction("str/contains?", "(contains? s substr)", "True if s contains substr.", PhelCompletionPriority.STRING_FUNCTIONS, "str"),
            DataFunction("str/ends-with?", "(ends-with? s substr)", "True if s ends with substr.", PhelCompletionPriority.STRING_FUNCTIONS, "str"),
            DataFunction("str/escape", "(escape s cmap)", "Return a new string, using cmap to escape each character ch   from s as follows:   If (cmap ch) is nil, append ch to the new string.   If (cmap ch) is non-nil, append (str (cmap ch)) instead.", PhelCompletionPriority.STRING_FUNCTIONS, "str"),
            DataFunction("str/includes?", "(includes? s substr)", "True if s includes substr.", PhelCompletionPriority.STRING_FUNCTIONS, "str"),
            DataFunction("str/index-of", "(index-of s value & [from-index])", "Return index of value (string or char) in s, optionally searching  forward from from-index. Return nil if value not found.", PhelCompletionPriority.STRING_FUNCTIONS, "str"),
            DataFunction("str/join", "(join separator & [coll])", "Returns a string of all elements in coll, as returned by (seq coll),   separated by an optional separator.", PhelCompletionPriority.STRING_FUNCTIONS, "str"),
            DataFunction("str/last-index-of", "(last-index-of s value & [from-index])", "Return last index of value (string or char) in s, optionally  searching backward from from-index. Return nil if value not found.", PhelCompletionPriority.STRING_FUNCTIONS, "str"),
            DataFunction("str/lower-case", "(lower-case s)", "Converts string to all lower-case. Handles multibyte characters.", PhelCompletionPriority.STRING_FUNCTIONS, "str"),
            DataFunction("str/pad-both", "(pad-both s len & [pad-str])", "Returns a string padded on both sides to length `len`.   If `pad-str` is omitted it defaults to a single space.", PhelCompletionPriority.STRING_FUNCTIONS, "str"),
            DataFunction("str/pad-left", "(pad-left s len & [pad-str])", "Returns a string padded on the left side to length `len`.   If `pad-str` is omitted it defaults to a single space.", PhelCompletionPriority.STRING_FUNCTIONS, "str"),
            DataFunction("str/pad-right", "(pad-right s len & [pad-str])", "Returns a string padded on the right side to length `len`.   If `pad-str` is omitted it defaults to a single space.", PhelCompletionPriority.STRING_FUNCTIONS, "str"),
            DataFunction("str/re-quote-replacement", "(re-quote-replacement replacement)", "Given a replacement string that you wish to be a literal   replacement for a pattern match in replace or replace-first, do the   necessary escaping of special characters in the replacement.", PhelCompletionPriority.STRING_FUNCTIONS, "str"),
            DataFunction("str/repeat", "(repeat s n)", "Returns a string containing n copies of s.", PhelCompletionPriority.STRING_FUNCTIONS, "str"),
            DataFunction("str/replace", "(replace s match replacement)", "Replaces all instance of match with replacement in s.   match/replacement can be:   string / string   pattern / (string or function of match).   See also replace-first.   The replacement is literal (i.e. none of its characters are treated   specially) for all cases above except pattern / string.   For pattern / string, $1, $2, etc. in the replacement string are   substituted with the string that matched the corresponding   parenthesized group in the pattern.  If you wish your replacement   string r to be used literally, use (re-quote-replacement r) as the   replacement argument.", PhelCompletionPriority.STRING_FUNCTIONS, "str"),
            DataFunction("str/replace-first", "(replace-first s match replacement)", "Replaces the first instance of match with replacement in s.   match/replacement can be:   char / char   string / string   pattern / (string or function of match).   See also replace.   The replacement is literal (i.e. none of its characters are treated   specially) for all cases above except pattern / string.   For pattern / string, $1, $2, etc. in the replacement string are   substituted with the string that matched the corresponding   parenthesized group in the pattern.  If you wish your replacement   string r to be used literally, use (re-quote-replacement r) as the   replacement argument.   Example:   (str/replace-first \"swap first two words\"                                 #\"(\\w+)(\\s+)(\\w+)\" \"$3$2$1\")   -> \"first swap two words\"", PhelCompletionPriority.STRING_FUNCTIONS, "str"),
            DataFunction("str/reverse", "(reverse s)", "Returns s with its characters reversed.", PhelCompletionPriority.STRING_FUNCTIONS, "str"),
            DataFunction("str/split", "(split s re & [limit])", "Splits string on a regular expression.  Optional argument limit is  the maximum number of parts. Not lazy. Returns vector of the parts.  Trailing empty strings are not returned - pass limit of -1 to return all.", PhelCompletionPriority.STRING_FUNCTIONS, "str"),
            DataFunction("str/split-lines", "(split-lines s)", "Splits s on \n or \r\n. Trailing empty lines are not returned.", PhelCompletionPriority.STRING_FUNCTIONS, "str"),
            DataFunction("str/starts-with?", "(starts-with? s substr)", "True if s starts with substr.", PhelCompletionPriority.STRING_FUNCTIONS, "str"),
            DataFunction("str/subs", "(subs s start & [end])", "Returns the substring of `s` from `start` (inclusive) to `end` (exclusive).   If `end` is omitted, the substring extends to the end of `s`.", PhelCompletionPriority.STRING_FUNCTIONS, "str"),
            DataFunction("str/trim", "(trim s)", "Removes whitespace from both ends of string.", PhelCompletionPriority.STRING_FUNCTIONS, "str"),
            DataFunction("str/trim-newline", "(trim-newline s)", "Removes all trailing newline \n or return \r characters from  string.  Similar to Perl's chomp.", PhelCompletionPriority.STRING_FUNCTIONS, "str"),
            DataFunction("str/triml", "(triml s)", "Removes whitespace from the left side of string.", PhelCompletionPriority.STRING_FUNCTIONS, "str"),
            DataFunction("str/trimr", "(trimr s)", "Removes whitespace from the right side of string.", PhelCompletionPriority.STRING_FUNCTIONS, "str"),
            DataFunction("str/upper-case", "(upper-case s)", "Converts string to all upper-case. Handles multibyte characters.", PhelCompletionPriority.STRING_FUNCTIONS, "str"),
        )
    }

    private fun registerTestFunctions() {
        functions[Namespace.TEST] = listOf(
            DataFunction("test/deftest", "(deftest test-name & body)", "Defines a test function with no arguments.", PhelCompletionPriority.TEST_FUNCTIONS, "test"),
            DataFunction("test/is", "(is form & [message])", "Generic assertion macro.", PhelCompletionPriority.TEST_FUNCTIONS, "test"),
            DataFunction("test/print-summary", "(print-summary )", "Prints the summary of the test suite.", PhelCompletionPriority.TEST_FUNCTIONS, "test"),
            DataFunction("test/report", "(report data)", "", PhelCompletionPriority.TEST_FUNCTIONS, "test"),
            DataFunction("test/run-tests", "(run-tests options & namespaces)", "Runs all test functions in the given namespaces.", PhelCompletionPriority.TEST_FUNCTIONS, "test"),
            DataFunction("test/successful?", "(successful? )", "Checks if all tests have passed.", PhelCompletionPriority.TEST_FUNCTIONS, "test"),
        )
    }
}
